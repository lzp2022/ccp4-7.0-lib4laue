#!/bin/bash
###Generated by Zhipu Luo@Soochow University-20231114####

wget -c https://raw.githubusercontent.com/lzp2022/ccp4-7.0-lib4laue/main/Daresbury_laue_Dec2020.tar.gz
wget -c https://raw.githubusercontent.com/lzp2022/ccp4-7.0-lib4laue/main/ccp4-7.0-lib4laue.tar.bz2


###Build ccp4-7.0 lib
tar xvf Daresbury_laue_Dec2020.tar.gz
tar xvf ccp4-7.0-lib4laue.tar.gz
cd ccp4-7.0-lib4laue
./build libccp4 tiff xdl-view jwc-f
cp ccp4-7.0/include/tiff* ../Daresbury_laue/lib/src
cd ..
pwd=$(pwd)
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$pwd/ccp4-7.0-lib4laue/ccp4-7.0/lib

###Build LAUEGEN
cd Daresbury_laue
./configure --with-ccp4=$pwd/ccp4-7.0-lib4laue/ccp4-7.0 --prefix=$pwd/LAUEGEN
make -j4
make install
cp $pwd/ccp4-7.0-lib4laue/ccp4-7.0/lib/*.so* $pwd/LAUEGEN/lib/
cd ../../

###Add LAUEGEN to your bash PATH
echo '
------------------Add LAUEGEN to your bash PATH-----------
export PATH=$PATH:'$PWD'/LAUEGEN/bin
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:'$PWD'/LAUEGEN/lib
export SYMOP='$PWD'/LAUEGEN/share/laue/symop.lib
----------------------------------------------------------
' 
rm -rf ccp4-7.0-lib4laue Daresbury_laue
exit 

